"use strict";(self["webpackChunkmanagement"]=self["webpackChunkmanagement"]||[]).push([[418],{9103:function(e,t,a){a.d(t,{Z:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[t("div",{staticClass:"title"},[t("i",{staticClass:"el-icon-search"}),t("span",[e._v("筛选搜索")]),t("el-button",{staticClass:"fr",attrs:{type:"primary",size:"small"},on:{click:e.handleSearch}},[e._v("搜索")]),t("el-button",{staticClass:"btn-reset fr",attrs:{size:"small"},on:{click:e.handleReset}},[e._v(" 重置 ")])],1),e._t("default")],2)},s=[],l={methods:{handleSearch(){this.$emit("handleSearch")},handleReset(){this.$emit("handleReset")}}},n=l,o=a(1001),i=(0,o.Z)(n,r,s,!1,null,"40da735d",null),c=i.exports},114:function(e,t,a){a.d(t,{Z:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[t("i",{staticClass:"el-icon-tickets"}),t("span",[e._v("数据列表")]),e._t("default")],2)},s=[],l={},n=l,o=a(1001),i=(0,o.Z)(n,r,s,!1,null,"3cadd859",null),c=i.exports},3418:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"manage-shop"},[t("search",{on:{handleReset:e.handleResetSearch,handleSearch:e.handleSearch}},[t("el-input",{staticClass:"search",attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.queryList.key,callback:function(t){e.$set(e.queryList,"key",t)},expression:"queryList.key"}},[t("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),t("el-select",{attrs:{placeholder:"所有商品",clearable:""},model:{value:e.queryList.state,callback:function(t){e.$set(e.queryList,"state",t)},expression:"queryList.state"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1),t("add",[t("el-button",{attrs:{size:"mini",type:"primary"}},[t("router-link",{staticStyle:{color:"#fff"},attrs:{to:"/shop/add"}},[e._v("添加")])],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.shops,border:""}},[t("el-table-column",{attrs:{prop:"index",label:"编号",width:"60px",align:"center"}}),t("el-table-column",{attrs:{label:"商品图片",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{staticClass:"shopImg",attrs:{src:e.row.imgUrl,alt:e.row.title}})]}}])}),t("el-table-column",{attrs:{prop:"title",label:"商品名",align:"center"}}),t("el-table-column",{attrs:{label:"价格/货号",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("p",[e._v("￥"+e._s(a.row.price))]),t("p",[e._v(e._s(a.row.shopId))])]}}])}),t("el-table-column",{attrs:{prop:"inventory",label:"库存",width:"60px",align:"center"}}),t("el-table-column",{attrs:{prop:"state",label:"状态",width:"60px",align:"center"}}),t("el-table-column",{attrs:{label:"操作",width:"138px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[[t("ChangeShopInfo",{attrs:{currentShop:a.row},on:{updata:e.getShops}}),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDeleteShop(a.row.shopId)}}},[e._v("删除")])]]}}])})],1),t("el-pagination",{attrs:{"current-page":e.queryList.currentPage,"page-size":e.queryList.pageSize,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.queryList,"currentPage",t)},"update:current-page":function(t){return e.$set(e.queryList,"currentPage",t)}}})],1)},s=[],l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"change-shop-info"},[t("el-button",{attrs:{size:"mini"},on:{click:e.changeUser}},[e._v("修改")]),t("el-dialog",{attrs:{title:"修改管理员信息",visible:e.dialogFormVisible,"before-close":e.cancelChange},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"status-icon":""}},[t("el-form-item",{attrs:{label:"商品名","label-width":"120px",prop:"title"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),t("el-form-item",{attrs:{label:"库存","label-width":"120px",prop:"inventory"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.inventory,callback:function(t){e.$set(e.form,"inventory",e._n(t))},expression:"form.inventory"}})],1),t("el-form-item",{attrs:{label:"价格","label-width":"120px",prop:"price"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",e._n(t))},expression:"form.price"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelChange}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.completeChange}},[e._v("确 定")])],1)],1)],1)},n=[],o=a(6124),i={props:["currentShop"],data(){return{form:{},rules:{title:[{required:!0,message:"请输入用户名",trigger:"blur"}],price:[{required:!0,message:"价格不能为空",trigger:"blur"},{type:"number",message:"价格必须为数字",trigger:"blur"}],inventory:[{required:!0,message:"库存不能为空",trigger:"blur"},{type:"number",message:"库存必须为数字",trigger:"blur"}]},dialogFormVisible:!1}},methods:{changeUser(){this.form={...this.currentShop},this.dialogFormVisible=!0},cancelChange(){this.dialogFormVisible=!1},completeChange(){this.$refs.form.validate((e=>{if(!e)return;let t=this.form;delete t["state"];let a={shopId:t.shopId,new:t};(0,o.Fk)(a).then((e=>{let t=JSON.parse(e.data);200===t.meta.status?(this.$message.success(t.meta.msg),this.$emit("updata")):this.$message.error(t.meta.msg)})).catch((e=>{this.$message.error(e)})),this.dialogFormVisible=!1}))}}},c=i,u=a(1001),h=(0,u.Z)(c,l,n,!1,null,"316b98a8",null),p=h.exports,d=a(114),m=a(9103);let f={currentPage:1,pageSize:5,state:"",key:""};var g={components:{ChangeShopInfo:p,Add:d.Z,Search:m.Z},data(){return{shops:[],total:0,options:[{value:"checked",label:"审核通过"},{value:"uncheck",label:"未审核"},{value:"noPass",label:"未通过"}],queryList:{...f}}},created(){this.getShops()},methods:{verifyState(){this.shops.forEach((e=>{e.state="checked"===e.state?"审核通过":"uncheck"==e.state?"未审核":"不通过"}))},getShops(){let{$message:e,verifyState:t}=this;(0,o.c_)(this.queryList).then((a=>{let r=JSON.parse(a.data);200===r.meta.status?(this.shops=r.data,this.total=r.total,t()):e.error(r.meta.msg)})).catch((t=>e.error(t)))},handleCurrentChange(e){this.queryList.currentPage=e,this.getShops()},handleSearch(){this.queryList.currentPage=1,this.getShops()},handleResetSearch(){this.queryList={...f}},handleDeleteShop(e){this.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.updateDeleteShop(e)})).catch((()=>{}))},updateDeleteShop(e){let{$message:t,getShops:a}=this;(0,o.jo)({shopId:e}).then((e=>{let r=JSON.parse(e.data);200===r.meta.status?(t.success(r.meta.msg),a()):t.error(r.meta.msg)})).catch((e=>t.error(e)))}}},b=g,v=(0,u.Z)(b,r,s,!1,null,"4e7c1f98",null),y=v.exports},6124:function(e,t,a){a.d(t,{Fk:function(){return n},Od:function(){return o},c_:function(){return l},jo:function(){return s}});var r=a(4003);function s(e){return(0,r.Z)({method:"post",url:"/shop/delete",data:e})}function l(e){return(0,r.Z)({method:"post",url:"/get/shops",data:e})}function n(e){return(0,r.Z)({method:"post",url:"/shop/change",data:e})}function o(e){return(0,r.Z)({method:"post",url:"/shop/create",data:e})}}}]);
//# sourceMappingURL=418.915ddbce.js.map